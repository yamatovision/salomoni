# スタイリストレポート機能デバッグテスト手順書

## 1. デバッグログの確認場所

### フロントエンドログ
- **確認場所**: ブラウザの開発者ツール（DevTools）のConsoleタブ
- **ファイル**: `frontend/src/pages/admin/StylistManagementPage.tsx`
- **表示されるログ**:
  ```
  Fetching stylist report for:
  Stylist report response:
  ```

### バックエンドログ
- **確認場所**: バックエンドサーバーのターミナル/コンソール出力
- **ファイル**: `backend/src/features/users/controllers/user.controller.ts`
- **表示されるログ**:
  ```
  getStylistReport called with:
  ```

## 2. エラーの詳細確認方法

### ブラウザでの確認手順
1. Chrome/Edge/Firefoxでアプリケーションを開く
2. F12キーまたは右クリック→「検証」で開発者ツールを開く
3. 「Console」タブを選択
4. エラーが発生した場合、赤色でエラーメッセージが表示される
5. エラーの詳細を確認するには、エラーメッセージの左側の矢印をクリックして展開

### ネットワークリクエストの確認
1. 開発者ツールの「Network」タブを開く
2. スタイリスト管理ページにアクセス
3. `/api/admin/stylists/{id}/report` へのリクエストを探す
4. リクエストをクリックして詳細を確認
   - Headers: リクエストヘッダーとレスポンスヘッダー
   - Response: サーバーからの応答内容
   - Preview: JSON形式でのレスポンス表示

## 3. 動作確認手順

### 前提条件
1. バックエンドサーバーが起動していること
   ```bash
   cd backend
   npm run dev
   ```
2. フロントエンドサーバーが起動していること
   ```bash
   cd frontend
   npm run dev
   ```

### テスト手順
1. **ログイン**
   - 管理者アカウントでログイン
   - 開発者ツールのConsoleを開いておく

2. **スタイリスト管理ページへアクセス**
   - 管理者ダッシュボードから「スタイリスト管理」をクリック
   - ページ読み込み時のログを確認

3. **スタイリストレポートの表示確認**
   - スタイリスト一覧の各行にある「レポート」ボタンをクリック
   - Consoleに以下のログが表示されることを確認：
     ```
     Fetching stylist report for: [スタイリストID]
     Stylist report response: [レスポンスデータ]
     ```
   - バックエンドのターミナルにも対応するログが表示されることを確認

4. **エラーケースの確認**
   - 存在しないスタイリストIDでアクセスした場合
   - ネットワークエラーが発生した場合
   - 認証エラーが発生した場合

### 期待される動作
1. レポートボタンクリック時：
   - ローディング状態が表示される
   - 成功時: レポートダイアログが表示される
   - 失敗時: エラーメッセージが表示される

2. レポートダイアログの内容：
   - 過去7日間の統計情報
   - 各日のクライアント数と売上
   - 合計クライアント数と合計売上

### トラブルシューティング
1. **404エラーが発生する場合**
   - APIパスが正しいか確認
   - スタイリストIDが存在するか確認
   - バックエンドのルーティングが正しく設定されているか確認

2. **認証エラーが発生する場合**
   - ログイン状態を確認
   - トークンの有効期限を確認
   - 管理者権限があるか確認

3. **データが表示されない場合**
   - ネットワークタブでレスポンスを確認
   - コンソールログでデータ構造を確認
   - バックエンドのログでクエリ実行を確認

## 4. デバッグログの削除
本番環境へのデプロイ前に、以下のデバッグログを削除してください：
- `frontend/src/pages/admin/StylistManagementPage.tsx` の console.log
- `backend/src/features/users/controllers/user.controller.ts` の console.log